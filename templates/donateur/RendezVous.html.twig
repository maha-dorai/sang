<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>{% block title %}Prendre Rendez-vous{% endblock %}</title>
    <link rel="stylesheet" href="{{ asset('build/flash-messages.css') }}">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">

       <link rel="stylesheet" href="{{ asset('theme/css/flash-messages.css') }}">

    {% block stylesheets %}{% endblock %}
</head>
<body>
    {# Messages Flash #}
    <div class="flash-messages-container">
        {% for type, messages in app.flashes %}
            {% for message in messages %}
                {% set alertType = type == 'FautDate' ? 'danger' : type %}
                <div class="alert alert-{{ alertType }}" data-alert-type="{{ alertType }}">
                    <div class="alert-content">
                        <span class="alert-title">
                            {% if type == 'success' %}Succ√®s
                            {% elseif type == 'danger' or type == 'FautDate' %}Erreur
                            {% elseif type == 'warning' %}Attention
                            {% elseif type == 'info' %}Information
                            {% else %}Notification{% endif %}
                        </span>
                        <span class="alert-message">{{ message }}</span>
                    </div>
                    <button type="button" class="alert-close" onclick="closeAlert(this)">
                        √ó
                    </button>
                    <div class="alert-progress"></div>
                </div>
            {% endfor %}
        {% endfor %}
    </div>

    <div class="container">
        <div class="text-center mb-4">
            <h1 class="display-5 fw-bold text-primary">üìÖ Prendre un Rendez-vous</h1>
            <p class="lead text-muted">R√©servez votre cr√©neau pour donner du sang</p>
        </div>

        <div class="card mb-4">
            <div class="card-header">
                <h5 class="card-title mb-0">üìã Informations de la collecte</h5>
            </div>
            <div class="card-body">
                <div class="row">
                    <div class="col-md-6">
                        <p><strong>üè∑Ô∏è Nom :</strong> {{ collecte.nom }}</p>
                        <p><strong>üìç Lieu :</strong> {{ collecte.lieu.nomLieu }}</p>
                        <p><strong>üè† Adresse :</strong> {{ collecte.lieu.adresse }}, {{ collecte.lieu.ville }}</p>
                    </div>
                    <div class="col-md-6">
                        <p><strong>üìÖ P√©riode :</strong> du {{ collecte.dateDebut|date('d/m/Y H:i') }} au {{ collecte.dateFin|date('d/m/Y H:i') }}</p>
                        <p><strong>üé´ Places disponibles :</strong> 
                            <span class="badge bg-{{ collecte.capaciteMaximale > 0 ? 'success' : 'danger' }} fs-6">
                                {{ collecte.capaciteMaximale }}
                            </span>
                        </p>
                    </div>
                </div>
            </div>
        </div>

        <div class="card">
            <div class="card-header">
                <h5 class="card-title mb-0">‚è∞ S√©lectionnez un cr√©neau</h5>
            </div>
            <div class="card-body">
                {{ form_start(form, {'attr': {'class': 'needs-validation', 'novalidate': 'novalidate'}}) }}
                    <div class="row">
                        <div class="col-md-6 mb-3">
                            {{ form_label(form.dateHeureDebut, 'Date et heure de d√©but', {'label_attr': {'class': 'form-label fw-bold'}}) }}
                            {{ form_widget(form.dateHeureDebut, {'attr': {'class': 'form-control'}}) }}
                            <div class="form-text">S√©lectionnez la date et l'heure de d√©but</div>
                        </div>
                        <div class="col-md-6 mb-3">
                            {{ form_label(form.dateheureFin, 'Date et heure de fin', {'label_attr': {'class': 'form-label fw-bold'}}) }}
                            {{ form_widget(form.dateheureFin, {'attr': {'class': 'form-control'}}) }}
                            <div class="form-text">S√©lectionnez la date et l'heure de fin</div>
                        </div>
                    </div>

                    {{ form_rest(form) }}

                    <div class="mt-4 text-center">
                        <button type="submit" class="btn btn-success btn-lg me-3">
                            ‚úÖ Confirmer le rendez-vous
                        </button>
                        <a href="{{ path('donateur_dashboard') }}" class="btn btn-secondary btn-lg">
                            ‚ùå Annuler
                        </a>
                    </div>
                {{ form_end(form) }}
            </div>
        </div>
    </div>

    <script src="{{ asset('theme/js/flash-messages.js') }}"></script>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
    {% block javascripts %}{% endblock %}
</body>
</html>